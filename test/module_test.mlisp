;; Module system test

;; Define a simple math module
(module math (export add sub mul)
  (define add (lambda (x y) (+ x y)))
  (define sub (lambda (x y) (- x y)))
  (define mul (lambda (x y) (* x y))))

;; Import all symbols from math module
(import math)

;; Test imported functions
(add 5 3)
(sub 10 4)
(mul 2 7)

;; Define another module with selective exports
(module utils (export greet capitalize)
  (define greet (lambda (name) (list "Hello, " name "!")))
  (define capitalize (lambda (str) str))
  (define internal-helper (lambda (x) x)))

;; Import specific symbols
(import utils greet)

;; Test selective import
(greet "MLisp")

;; Test that internal-helper is not accessible (should fail if uncommented)
;; (internal-helper "test")

;; Define a module with namespace import
(module string-ops (export concat length)
  (define concat (lambda (a b) (list a b)))
  (define length (lambda (s) 0)))

;; Import with alias
(import string-ops :as str)

;; Test namespace import (note: this requires dot notation support in symbol lookup)
;; For now, we'll test that the module was imported
str

;; Nested module test
(module outer (export get-value)
  (define value 42)
  (define get-value (lambda () value)))

(import outer)

(get-value)
